# 영상 재생 테스트 가이드

## 테스트 방법

### 1. Streamlit 앱 실행
```bash
cd "otani"
streamlit run app.py
```

### 2. 추천 시스템 페이지에서 테스트

1. **웹 브라우저에서 앱 열기**
   - 기본 주소: `http://localhost:8501`

2. **추천 시스템 페이지로 이동**
   - 사이드바에서 "추천 시스템" 선택

3. **전략 생성 버튼 클릭**
   - "전략 생성 (Generate Strategy)" 버튼 클릭
   - 1순위/2순위 구종 추천 결과 확인

4. **영상 재생 확인**
   - "🎬 관련 실제 투구 영상" 섹션 확인
   - 각 영상이 표시되는지 확인
   - 영상 플레이어에서 재생 버튼 클릭하여 재생 확인

### 3. 동영상 탐색 페이지에서 테스트

1. **동영상 탐색 페이지로 이동**
   - 사이드바에서 "동영상 탐색" 선택

2. **필터 설정**
   - 구종 선택 (예: SL, CU 등)
   - 릴리스 각도 범위 설정

3. **영상 선택 및 재생**
   - 검색 결과에서 투구 선택
   - "상세 정보" 섹션에서 영상 재생 확인

## 예상 결과

### ✅ 정상 작동 시
- 영상 플레이어가 표시됨
- 재생 버튼 클릭 시 영상이 재생됨
- 메타데이터(날짜, 카운트, 아웃, 결과)가 정상 표시됨

### ❌ 문제 발생 시
- "⚠️ 영상 파일을 찾을 수 없습니다" 경고 메시지 표시
- "디버깅 정보" 확장 가능한 섹션에 상세 정보 표시
  - 파일명
  - 경로
  - 부모 폴더 존재 여부

## 수동 테스트 체크리스트

- [ ] CSV 파일 로드 확인
- [ ] 2025년 데이터 필터링 확인
- [ ] 영상 경로 변환 확인
- [ ] 파일 존재 여부 확인
- [ ] Streamlit 영상 재생 확인
- [ ] 여러 구종의 영상 재생 확인
- [ ] 다양한 날짜의 영상 재생 확인

## 문제 해결

### 영상이 재생되지 않는 경우

1. **파일 경로 확인**
   - 디버깅 정보에서 경로 확인
   - 실제 파일이 해당 경로에 존재하는지 확인

2. **경로 변환 확인**
   - `src/data/video_data.py`의 `normalize_video_path` 함수 확인
   - `analyzed_videos` 폴더와 `2025_data/videos` 폴더 모두 확인

3. **파일 권한 확인**
   - 파일 읽기 권한 확인
   - 파일이 손상되지 않았는지 확인

4. **Streamlit 캐시 클리어**
   - 브라우저에서 `Ctrl + Shift + R` (강력 새로고침)
   - 또는 Streamlit 재시작

## 테스트 스크립트 실행 (선택사항)

PowerShell에서 실행:
```powershell
cd "otani"
python test_video_paths.py
```

또는 Python 직접 실행:
```python
import sys
sys.path.insert(0, 'otani')
exec(open('otani/test_video_paths.py', encoding='utf-8').read())
```

